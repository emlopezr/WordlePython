from palabras.palabras import palabraAleatoria # Sacar palabras aleatorias del lemario

class Partida:
    def __init__(self, dificultad):
        # Generar palabra y separar sus car√°cteres para la l√≥gica
        self.palabraCorrecta = [ i for i in palabraAleatoria(dificultad) ]

        # Par√°metros predeterminados de la partida
        self.dificultad = dificultad
        self.ganado = False
        self.estado = True # True: En curso, False: Acabada
        self.intento = 0 # Intentos realizados hasta ahora (Max 6)

    # L√≥gica principal del juego
    def hacerIntento(self, palabraUser):
        # Solo jugar si la partida est√° activa
        if not self.estado: return

        # Separar los car√°cteres de la palabra para la l√≥gica
        palabraUser = [ i for i in palabraUser ]

        # L√≥gica del juego (Los aciertos se guardan en esta lista)
        resultadoIntento = []

        # Recorrer la palabra suministrada por el usuario
        for i in range(len(palabraUser)):

            # La letra no est√° en la palabra
            if palabraUser[i] not in self.palabraCorrecta: resultadoIntento.append('‚¨õ')
            
            # La letra est√° en la posici√≥n correcta
            elif palabraUser[i] == self.palabraCorrecta[i]: resultadoIntento.append('üü©')

            # La letra est√° en la palabra, pero est√° en la posici√≥n incorrecta
            else: 
                repeticionesUser = palabraUser.count(palabraUser[i])
                repeticionesCorrecta = self.palabraCorrecta.count(palabraUser[i])
                
                # La letra efectivamente est√° en la posici√≥n incorrecta
                if repeticionesUser <= repeticionesCorrecta: resultadoIntento.append('üü®')
                
                # Esta letra sobra (El usuario indic√≥ la letra m√°s veces de las que deber√≠a)
                else: resultadoIntento.append('‚¨õ')

        # Verificar si se acert√≥ la palabra (Todo el resultado debe de ser üü©)
        if ''.join(resultadoIntento) == 'üü©'*self.dificultad:
            # Dar por terminada la partida
            self.ganado = True
            self.estado = False

        # Sumar intento, y si ya se acabaron los intentos, finalizar la partida
        self.intento += 1
        if self.intento == 6: self.estado = False

        # Retornar resultado para mostralo en pantalla
        return resultadoIntento